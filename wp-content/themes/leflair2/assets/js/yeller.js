(function(window){function _has(object,key){return Object.prototype.hasOwnProperty.call(object,key)}function _isUndefined(what){return what===undefined}var TraceKit={},_oldTraceKit=window.TraceKit,_slice=[].slice,UNKNOWN_FUNCTION="?";TraceKit.noConflict=function(){return window.TraceKit=_oldTraceKit,TraceKit},TraceKit.wrap=function(func){function wrapped(){try{return func.apply(this,arguments)}catch(e){throw TraceKit.report(e),e}}return wrapped},TraceKit.report=function(){function subscribe(handler){installGlobalHandler(),handlers.push(handler)}function unsubscribe(handler){for(var i=handlers.length-1;i>=0;--i)handlers[i]===handler&&handlers.splice(i,1)}function notifyHandlers(stack,windowError){var exception=null;if(!windowError||TraceKit.collectWindowErrors){for(var i in handlers)if(_has(handlers,i))try{handlers[i].apply(null,[stack].concat(_slice.call(arguments,2)))}catch(inner){exception=inner}if(exception)throw exception}}function traceKitWindowOnError(message,url,lineNo){var stack=null;if(lastExceptionStack)TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(lastExceptionStack,url,lineNo,message),stack=lastExceptionStack,lastExceptionStack=null,lastException=null;else{var location={url:url,line:lineNo};location.func=TraceKit.computeStackTrace.guessFunctionName(location.url,location.line),location.context=TraceKit.computeStackTrace.gatherContext(location.url,location.line),stack={mode:"onerror",message:message,url:document.location.href,stack:[location],useragent:navigator.userAgent}}return notifyHandlers(stack,"from window.onerror"),_oldOnerrorHandler?_oldOnerrorHandler.apply(this,arguments):!1}function installGlobalHandler(){_onErrorHandlerInstalled!==!0&&(_oldOnerrorHandler=window.onerror,window.onerror=traceKitWindowOnError,_onErrorHandlerInstalled=!0)}function report(ex){var args=_slice.call(arguments,1);if(lastExceptionStack){if(lastException===ex)return;var s=lastExceptionStack;lastExceptionStack=null,lastException=null,notifyHandlers.apply(null,[s,null].concat(args))}var stack=TraceKit.computeStackTrace(ex);throw lastExceptionStack=stack,lastException=ex,window.setTimeout(function(){lastException===ex&&(lastExceptionStack=null,lastException=null,notifyHandlers.apply(null,[stack,null].concat(args)))},stack.incomplete?2e3:0),ex}var _oldOnerrorHandler,_onErrorHandlerInstalled,handlers=[],lastException=null,lastExceptionStack=null;return report.subscribe=subscribe,report.unsubscribe=unsubscribe,report}(),TraceKit.computeStackTrace=function(){function loadSource(url){if(!TraceKit.remoteFetching)return"";try{var getXHR=function(){try{return new window.XMLHttpRequest}catch(e){return new window.ActiveXObject("Microsoft.XMLHTTP")}},request=getXHR();return request.open("GET",url,!1),request.send(""),request.responseText}catch(e){return""}}function getSource(url){if(!_has(sourceCache,url)){var source="";-1!==url.indexOf(document.domain)&&(source=loadSource(url)),sourceCache[url]=source?source.split("\n"):[]}return sourceCache[url]}function guessFunctionName(url,lineNo){var m,reFunctionArgNames=/function ([^(]*)\(([^)]*)\)/,reGuessFunction=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,line="",maxLines=10,source=getSource(url);if(!source.length)return UNKNOWN_FUNCTION;for(var i=0;maxLines>i;++i)if(line=source[lineNo-i]+line,!_isUndefined(line)){if(m=reGuessFunction.exec(line))return m[1];if(m=reFunctionArgNames.exec(line))return m[1]}return UNKNOWN_FUNCTION}function gatherContext(url,line){var source=getSource(url);if(!source.length)return null;var context=[],linesBefore=Math.floor(TraceKit.linesOfContext/2),linesAfter=linesBefore+TraceKit.linesOfContext%2,start=Math.max(0,line-linesBefore-1),end=Math.min(source.length,line+linesAfter-1);line-=1;for(var i=start;end>i;++i)_isUndefined(source[i])||context.push(source[i]);return context.length>0?context:null}function escapeRegExp(text){return text.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function escapeCodeAsRegExpForMatchingInsideHTML(body){return escapeRegExp(body).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function findSourceInUrls(re,urls){for(var source,m,i=0,j=urls.length;j>i;++i)if((source=getSource(urls[i])).length&&(source=source.join("\n"),m=re.exec(source)))return{url:urls[i],line:source.substring(0,m.index).split("\n").length,column:m.index-source.lastIndexOf("\n",m.index)-1};return null}function findSourceInLine(fragment,url,line){var m,source=getSource(url),re=RegExp("\\b"+escapeRegExp(fragment)+"\\b");return line-=1,source&&source.length>line&&(m=re.exec(source[line]))?m.index:null}function findSourceByFunctionBody(func){for(var body,re,parts,result,urls=[window.location.href],scripts=document.getElementsByTagName("script"),code=""+func,codeRE=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,eventRE=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,i=0;scripts.length>i;++i){var script=scripts[i];script.src&&urls.push(script.src)}if(parts=codeRE.exec(code)){var name=parts[1]?"\\s+"+parts[1]:"",args=parts[2].split(",").join("\\s*,\\s*");body=escapeRegExp(parts[3]).replace(/;$/,";?"),re=RegExp("function"+name+"\\s*\\(\\s*"+args+"\\s*\\)\\s*{\\s*"+body+"\\s*}")}else re=RegExp(escapeRegExp(code).replace(/\s+/g,"\\s+"));if(result=findSourceInUrls(re,urls))return result;if(parts=eventRE.exec(code)){var event=parts[1];if(body=escapeCodeAsRegExpForMatchingInsideHTML(parts[2]),re=RegExp("on"+event+"=[\\'\"]\\s*"+body+"\\s*[\\'\"]","i"),result=findSourceInUrls(re,urls[0]))return result;if(re=RegExp(body),result=findSourceInUrls(re,urls))return result}return null}function computeStackTraceFromStackProp(ex){if(!ex.stack)return null;for(var parts,element,chrome=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,gecko=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i,lines=ex.stack.split("\n"),stack=[],reference=/^(.*) is undefined$/.exec(ex.message),i=0,j=lines.length;j>i;++i){if(parts=gecko.exec(lines[i]))element={url:parts[3],func:parts[1]||UNKNOWN_FUNCTION,args:parts[2]?parts[2].split(","):"",line:+parts[4],column:parts[5]?+parts[5]:null};else{if(!(parts=chrome.exec(lines[i])))continue;element={url:parts[2],func:parts[1]||UNKNOWN_FUNCTION,line:+parts[3],column:parts[4]?+parts[4]:null}}!element.func&&element.line&&(element.func=guessFunctionName(element.url,element.line)),element.line&&(element.context=gatherContext(element.url,element.line)),stack.push(element)}return stack[0]&&stack[0].line&&!stack[0].column&&reference&&(stack[0].column=findSourceInLine(reference[1],stack[0].url,stack[0].line)),stack.length?{mode:"stack",name:ex.name,message:ex.message,url:document.location.href,stack:stack,useragent:navigator.userAgent}:null}function computeStackTraceFromStacktraceProp(ex){for(var parts,stacktrace=ex.stacktrace,testRE=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,lines=stacktrace.split("\n"),stack=[],i=0,j=lines.length;j>i;i+=2)if(parts=testRE.exec(lines[i])){var element={line:+parts[1],column:+parts[2],func:parts[3]||parts[4],args:parts[5]?parts[5].split(","):[],url:parts[6]};if(!element.func&&element.line&&(element.func=guessFunctionName(element.url,element.line)),element.line)try{element.context=gatherContext(element.url,element.line)}catch(exc){}element.context||(element.context=[lines[i+1]]),stack.push(element)}return stack.length?{mode:"stacktrace",name:ex.name,message:ex.message,url:document.location.href,stack:stack,useragent:navigator.userAgent}:null}function computeStackTraceFromOperaMultiLineMessage(ex){var lines=ex.message.split("\n");if(4>lines.length)return null;var parts,i,len,source,lineRE1=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,lineRE2=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,lineRE3=/^\s*Line (\d+) of function script\s*$/i,stack=[],scripts=document.getElementsByTagName("script"),inlineScriptBlocks=[];for(i in scripts)_has(scripts,i)&&!scripts[i].src&&inlineScriptBlocks.push(scripts[i]);for(i=2,len=lines.length;len>i;i+=2){var item=null;if(parts=lineRE1.exec(lines[i]))item={url:parts[2],func:parts[3],line:+parts[1]};else if(parts=lineRE2.exec(lines[i])){item={url:parts[3],func:parts[4]};var relativeLine=+parts[1],script=inlineScriptBlocks[parts[2]-1];if(script&&(source=getSource(item.url))){source=source.join("\n");var pos=source.indexOf(script.innerText);pos>=0&&(item.line=relativeLine+source.substring(0,pos).split("\n").length)}}else if(parts=lineRE3.exec(lines[i])){var url=window.location.href.replace(/#.*$/,""),line=parts[1],re=RegExp(escapeCodeAsRegExpForMatchingInsideHTML(lines[i+1]));source=findSourceInUrls(re,[url]),item={url:url,line:source?source.line:line,func:""}}if(item){item.func||(item.func=guessFunctionName(item.url,item.line));var context=gatherContext(item.url,item.line),midline=context?context[Math.floor(context.length/2)]:null;item.context=context&&midline.replace(/^\s*/,"")===lines[i+1].replace(/^\s*/,"")?context:[lines[i+1]],stack.push(item)}}return stack.length?{mode:"multiline",name:ex.name,message:lines[0],url:document.location.href,stack:stack,useragent:navigator.userAgent}:null}function augmentStackTraceWithInitialElement(stackInfo,url,lineNo,message){var initial={url:url,line:lineNo};if(initial.url&&initial.line){stackInfo.incomplete=!1,initial.func||(initial.func=guessFunctionName(initial.url,initial.line)),initial.context||(initial.context=gatherContext(initial.url,initial.line));var reference=/ '([^']+)' /.exec(message);if(reference&&(initial.column=findSourceInLine(reference[1],initial.url,initial.line)),stackInfo.stack.length>0&&stackInfo.stack[0].url===initial.url){if(stackInfo.stack[0].line===initial.line)return!1;if(!stackInfo.stack[0].line&&stackInfo.stack[0].func===initial.func)return stackInfo.stack[0].line=initial.line,stackInfo.stack[0].context=initial.context,!1}return stackInfo.stack.unshift(initial),stackInfo.partial=!0,!0}return stackInfo.incomplete=!0,!1}function computeStackTraceByWalkingCallerChain(ex,depth){for(var parts,item,source,functionName=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,stack=[],funcs={},recursion=!1,curr=computeStackTraceByWalkingCallerChain.caller;curr&&!recursion;curr=curr.caller)if(curr!==computeStackTrace&&curr!==TraceKit.report){if(item={url:null,func:UNKNOWN_FUNCTION,line:null,column:null},curr.name?item.func=curr.name:(parts=functionName.exec(""+curr))&&(item.func=parts[1]),source=findSourceByFunctionBody(curr)){item.url=source.url,item.line=source.line,item.func===UNKNOWN_FUNCTION&&(item.func=guessFunctionName(item.url,item.line));var reference=/ '([^']+)' /.exec(ex.message||ex.description);reference&&(item.column=findSourceInLine(reference[1],source.url,source.line))}funcs[""+curr]?recursion=!0:funcs[""+curr]=!0,stack.push(item)}depth&&stack.splice(0,depth);var result={mode:"callers",name:ex.name,message:ex.message,url:document.location.href,stack:stack,useragent:navigator.userAgent};return augmentStackTraceWithInitialElement(result,ex.sourceURL||ex.fileName,ex.line||ex.lineNumber,ex.message||ex.description),result}function computeStackTrace(ex,depth){var stack=null;depth=null==depth?0:+depth;try{if(stack=computeStackTraceFromStacktraceProp(ex))return stack}catch(e){if(debug)throw e}try{if(stack=computeStackTraceFromStackProp(ex))return stack}catch(e){if(debug)throw e}try{if(stack=computeStackTraceFromOperaMultiLineMessage(ex))return stack}catch(e){if(debug)throw e}try{if(stack=computeStackTraceByWalkingCallerChain(ex,depth+1))return stack}catch(e){if(debug)throw e}return{mode:"failed"}}function computeStackTraceOfCaller(depth){depth=(null==depth?0:+depth)+1;try{throw Error()}catch(ex){return computeStackTrace(ex,depth+1)}}var debug=!1,sourceCache={};return computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement,computeStackTrace.guessFunctionName=guessFunctionName,computeStackTrace.gatherContext=gatherContext,computeStackTrace.ofCaller=computeStackTraceOfCaller,computeStackTrace}(),function(){var _helper=function _helper(fnName){var originalFn=window[fnName];window[fnName]=function(){var args=_slice.call(arguments),originalCallback=args[0];return"function"==typeof originalCallback&&(args[0]=TraceKit.wrap(originalCallback)),originalFn.apply?originalFn.apply(this,args):originalFn(args[0],args[1])}};_helper("setTimeout"),_helper("setInterval")}(),TraceKit.remoteFetching||(TraceKit.remoteFetching=!0),TraceKit.collectWindowErrors||(TraceKit.collectWindowErrors=!0),(!TraceKit.linesOfContext||1>TraceKit.linesOfContext)&&(TraceKit.linesOfContext=11),window.TraceKit=TraceKit})(window),!function(e,t){"undefined"!=typeof module&&module.exports?module.exports.browser=t():"function"==typeof define&&define.amd?define(t):this[e]=t()}("bowser",function(){function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function r(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var c,i=n(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(t),o=!s&&/android/i.test(t),u=n(/edge\/(\d+(\.\d+)?)/i),a=n(/version\/(\d+(\.\d+)?)/i),f=/tablet/i.test(t),l=!f&&/[^-]mobi/i.test(t);/opera|opr/i.test(t)?c={name:"Opera",opera:e,version:a||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(t)?c={name:"Yandex Browser",yandexbrowser:e,version:a||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(t)?(c={name:"Windows Phone",windowsphone:e},u?(c.msedge=e,c.version=u):(c.msie=e,c.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?c={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(t)?c={name:"Microsoft Edge",msedge:e,version:u}:/chrome|crios|crmo/i.test(t)?c={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:i?(c={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},a&&(c.version=a)):/sailfish/i.test(t)?c={name:"Sailfish",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?c={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(t)?(c={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(c.firefoxos=e)):/silk/i.test(t)?c={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:o?c={name:"Android",version:a}:/phantom/i.test(t)?c={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?c={name:"BlackBerry",blackberry:e,version:a||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(t)?(c={name:"WebOS",webos:e,version:a||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(c.touchpad=e)):c=/bada/i.test(t)?{name:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(t)?{name:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||a}:/safari/i.test(t)?{name:"Safari",safari:e,version:a}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!c.msedge&&/(apple)?webkit/i.test(t)?(c.name=c.name||"Webkit",c.webkit=e,!c.version&&a&&(c.version=a)):!c.opera&&/gecko\//i.test(t)&&(c.name=c.name||"Gecko",c.gecko=e,c.version=c.version||n(/gecko\/(\d+(\.\d+)?)/i)),c.msedge||!o&&!c.silk?i&&(c[i]=e,c.ios=e):c.android=e;var h="";c.windowsphone?h=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i?(h=n(/os (\d+([_\s]\d+)*) like mac os x/i),h=h.replace(/[_\s]/g,".")):o?h=n(/android[ \/-](\d+(\.\d+)*)/i):c.webos?h=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):c.blackberry?h=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):c.bada?h=n(/bada\/(\d+(\.\d+)*)/i):c.tizen&&(h=n(/tizen[\/\s](\d+(\.\d+)*)/i)),h&&(c.osversion=h);var p=h.split(".")[0];return f||"ipad"==i||o&&(3==p||4==p&&!l)||c.silk?c.tablet=e:(l||"iphone"==i||"ipod"==i||o||c.blackberry||c.webos||c.bada)&&(c.mobile=e),c.msedge||c.msie&&c.version>=10||c.yandexbrowser&&c.version>=15||c.chrome&&c.version>=20||c.firefox&&c.version>=20||c.safari&&c.version>=6||c.opera&&c.version>=10||c.ios&&c.osversion&&c.osversion.split(".")[0]>=6||c.blackberry&&c.version>=10.1?c.a=e:c.msie&&10>c.version||c.chrome&&20>c.version||c.firefox&&20>c.version||c.safari&&6>c.version||c.opera&&10>c.version||c.ios&&c.osversion&&6>c.osversion.split(".")[0]?c.c=e:c.x=e,c}var e=!0,n=t("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(e){for(var t=0;e.length>t;++t){var r=e[t];if("string"==typeof r&&r in n)return!0}return!1},n._detect=t,n});var yellerBase64={};yellerBase64.PADCHAR="=",yellerBase64.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",yellerBase64.makeDOMException=function(){try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(tmp){var ex=Error("DOM Exception 5");return ex.code=ex.number=5,ex.name=ex.description="INVALID_CHARACTER_ERR",ex.toString=function(){return"Error: "+ex.name+": "+ex.message},ex}},yellerBase64.getbyte64=function(s,i){var idx=yellerBase64.ALPHA.indexOf(s.charAt(i));if(-1===idx)throw yellerBase64.makeDOMException();return idx},yellerBase64.decode=function(s){s=""+s;var pads,i,b10,getbyte64=yellerBase64.getbyte64,imax=s.length;if(0===imax)return s;if(0!==imax%4)throw yellerBase64.makeDOMException();pads=0,s.charAt(imax-1)===yellerBase64.PADCHAR&&(pads=1,s.charAt(imax-2)===yellerBase64.PADCHAR&&(pads=2),imax-=4);var x=[];for(i=0;imax>i;i+=4)b10=getbyte64(s,i)<<18|getbyte64(s,i+1)<<12|getbyte64(s,i+2)<<6|getbyte64(s,i+3),x.push(String.fromCharCode(b10>>16,255&b10>>8,255&b10));switch(pads){case 1:b10=getbyte64(s,i)<<18|getbyte64(s,i+1)<<12|getbyte64(s,i+2)<<6,x.push(String.fromCharCode(b10>>16,255&b10>>8));break;case 2:b10=getbyte64(s,i)<<18|getbyte64(s,i+1)<<12,x.push(String.fromCharCode(b10>>16))}return x.join("")},yellerBase64.getbyte=function(s,i){var x=s.charCodeAt(i);if(x>255)throw yellerBase64.makeDOMException();return x},yellerBase64.encode=function(s){if(1!==arguments.length)throw new SyntaxError("Not enough arguments");var i,b10,padchar=yellerBase64.PADCHAR,alpha=yellerBase64.ALPHA,getbyte=yellerBase64.getbyte,x=[];s=""+s;var imax=s.length-s.length%3;if(0===s.length)return s;for(i=0;imax>i;i+=3)b10=getbyte(s,i)<<16|getbyte(s,i+1)<<8|getbyte(s,i+2),x.push(alpha.charAt(b10>>18)),x.push(alpha.charAt(63&b10>>12)),x.push(alpha.charAt(63&b10>>6)),x.push(alpha.charAt(63&b10));switch(s.length-imax){case 1:b10=getbyte(s,i)<<16,x.push(alpha.charAt(b10>>18)+alpha.charAt(63&b10>>12)+padchar+padchar);break;case 2:b10=getbyte(s,i)<<16|getbyte(s,i+1)<<8,x.push(alpha.charAt(b10>>18)+alpha.charAt(63&b10>>12)+alpha.charAt(63&b10>>6)+padchar)}return x.join("")},function(self){var get_browser=function(){if("interactive"===bowser.name||"complete"===bowser.name||"loading"===bowser.name)return!1;var result={name:bowser.name,version:bowser.version};return result},ErrorFormatter={};ErrorFormatter.format=function(options){var tracekitResult=options.tracekit_info||TraceKit.computeStackTrace(options.error),result={type:options.type||options.error.name||tracekitResult.name||"Error",message:options.error.message,stacktrace:ErrorFormatter.formatStackTrace(tracekitResult),url:options.url||tracekitResult.url,"client-version":"JavaScript: 0.0.1"};return options.environment&&(result["application-environment"]=options.environment),options.location&&(result.location=options.location),result["custom-data"]=options.custom_data?options.custom_data:{},ErrorFormatter.addCustomData(result)},ErrorFormatter.addCustomData=function(result){var browser=get_browser();return browser&&(result["custom-data"].browser=browser),document.readyState&&(result["custom-data"].readyState=document.readyState),document.referrer&&(result["custom-data"].referrer=document.referrer),window.history&&window.history.state&&(result["custom-data"].history=JSON.stringify(window.history.state)),result},ErrorFormatter.formatStackTrace=function(stacktrace){var out=[];for(var i in stacktrace.stack){var frame=stacktrace.stack[i],lineCol="";lineCol+=frame.column?""+frame.line+":"+(""+frame.column):""+frame.line,out.push([""+frame.url,lineCol,""+frame.func])}return out};var getRandomInt=function(min,max){return Math.floor(Math.random()*(max-min+1))+min},crossDomainPendings=[],crossDomainPost=function(token,payload){if(!document.body)return crossDomainPendings.push({token:token,payload:payload}),void 0;var iframe=document.createElement("iframe"),uniqueNameOfFrame="yeller"+(new Date).getTime();document.body.appendChild(iframe),iframe.style.display="none",iframe.contentWindow.name=uniqueNameOfFrame;var form=document.createElement("form");form.target=uniqueNameOfFrame,form.action="https://collector"+getRandomInt(1,5)+".yellerapp.com/"+token,form.method="POST";var input=document.createElement("input");input.type="hidden",input.name="__payload";var serializedPayload=yellerBase64.encode(JSON.stringify(payload));payload&&"undefined"!==serializedPayload&&token&&(input.value=serializedPayload,form.appendChild(input),document.body.appendChild(form),form.submit())},Yeller=function(transport,options){this.transport=transport,this.environment=options.environment,this.location=options.location,this.token=options.token,this.ignored_environments=options.ignored_environments||["development","test"],this.eventsRemaining=10,this.filter=options.filter,this.transform=options.transform};Yeller.prototype.report=function(err,options){void 0===options&&(options={});var withClientParams=this.fillInPerClientParams(this,options);for(var i in this.ignored_environments){var env=this.ignored_environments[i];if(withClientParams.environment===env)return!1}if("string"==typeof err)err=Error(err);else if(err instanceof Error);else if(err instanceof Object)for(var k in err)if(err.hasOwnProperty(k)){var value=err[k];withClientParams["custom-data"]=withClientParams["custom-data"]||{},withClientParams["custom-data"][k]=value}if(withClientParams.error=err,this.eventsRemaining=this.eventsRemaining-1,0>=this.eventsRemaining)return!1;var formattedError=ErrorFormatter.format(withClientParams);if(this.filter&&!this.filter(formattedError))return!1;if(this.transform)try{formattedError=this.transform(formattedError)}catch(e){console.log("Yeller: caught error in transform: "+e)}return formattedError&&this.transport(this.token,formattedError),!0},Yeller.prototype.fillInPerClientParams=function(client,options){return options.environment=client.environment?client.environment:"production",client.location&&(options.location=client.location),options},Yeller.checkValidOptions=function(options){return"string"!=typeof options.token?(console.warn("options.token should be a string, but was: "+options.token),!1):"string"!=typeof(options.environment||"production")?(console.warn("options.environment should be a string, but was: "+options.environment),!1):"string"!=typeof(options.location||"location")?(console.warn("options.location should be a string, but was: "+options.location),!1):!0},Yeller.configure=function(options){return Yeller.checkValidOptions(options)?(Yeller.client=new Yeller(crossDomainPost,options||{}),self.TraceKit=self.TraceKit.noConflict(),options.automaticCatch!==!1&&(self.TraceKit.collectWindowErrors=!0,self.TraceKit.remoteFetching=!1,self.TraceKit.report.subscribe(function(tracekitInfo){Yeller.client.report({name:tracekitInfo.name,message:tracekitInfo.message},{tracekit_info:tracekitInfo})})),Yeller.client):!1},Yeller.report=function(err,options){return Yeller.client?Yeller.client.report(err,options):(console.warn("Yeller client not initialized. Please call Yeller.configure before calling Yeller.report"),!1)},window.addEventListener("load",function(){for(var i in crossDomainPendings){var pendingRequest=crossDomainPendings[i];crossDomainPost(pendingRequest.token,pendingRequest.payload)}}),self.Yeller=Yeller,self.Yeller.ErrorFormatter=ErrorFormatter,self.Yeller.CrossDomainTransport=crossDomainPost}(window);